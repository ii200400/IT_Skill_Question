# Spring

필자의 환경설정
+ Spring Tool Suite 3
  + Version: 3.9.14.RELEASE
  + Platform: Eclipse 2020-03 (4.15.0)
+ tomcat
  + apache-tomcat-9.0.60
+ mysql
  + 8.0.28

+ 참고
  + [스프링 공식홈페이지](https://spring.io/projects/spring-framework)
  + 그.. 강의

## 개요

+ 웹 사이트가 점점 커지면서 엔터프라이즈급(기업이나 회사 규모)의 서비스가 수요증대
  + 로깅, 분산처리, 보안 등의 기능을 쉽게 관리하고
  + 세션 빈에서 transaction 관리 용이한 서비스 수요 증대
+ 자바 개발자들 사이에서는 엔터프라이즈급 서비스를 제공하는 EJB(Enterprise Java Bean)가 각광 
  + 기존의 POJO(Plain Old Java Object)와는 다르게 EJB에 정의된 인터페이스에 따라 코드를 작성해야 한다.
  + 배우기 어렵고 설정이 많다.
  + EJB는 (RMI를 기반으로하는) 무거운 서버이자 Container이다.
  + 컨테이너에 배포를 해야 테스트가 가능하여 개발속도가 저하되었다.
+ 점차 EJB를 사용하지 않고 엔터프라이즈급 애플리케이션을 작성할 수 있는 방법론이 거론
  + AOP나 DI 같은 새로운 프로그래밍 방법론 대두
  + POJO로도 엔터프라이즈급 프로그래밍 모델 작성 가능
+ POJO와 경량 프레임워크를 사용하기 시작

POJO(Plain Old Java Object)는 아래와 같은 자바객체를 의미한다.
+ 특정 프레임워크나 기술에 의존적이지 않은 자바 객체
+ 위의 특성으로 기술에 종속적이지 않은 객체이기 때문에 생산성과 이식성 향상
+ component interface를 상속받지 않는, 특정 framework에 종속되지 않는 객체 (Plain)
+ EJB 이전의 자바 클래스 (Old)

경량 프레임워크란
+ EJB가 제공하는 서비스를 지원해 줄 수 있는 프레임워크 등장
+ Hibernate, JDO, iBatis, Spring 등

위의 POJO와 경량 프레임워크를 사용하여 웹 애플리케이션을 만들 경우 아래의 장점이 있다.
+ EJB 서버와 같은 무거운 컨테이너가 필요하지 않음
+ 오픈소스 프레임워크라 사용이 무료
+ 엔터프라이즈급 애플리케이션 개발에 필요한 많은 라이브러리 지원
+ 프레임워크가 스프링 프레임워크인 경우 모든 플랫폼에서 사용이 가능

많은 경량 프레임워크가 있어도 스프링을 사용하는 이유(특징)은 아래와 같다.
+ 엔터프라이즈급 애플리케이션을 만들기 위한 모든 기능을 종합적으로 제공
  + configuration model 이나 애플리케이션 수준의 인프라 제공
  + 즉, 개발자가 복잡하고 실수하기 쉬운 Low Level 기능에 신경쓰지 않고 Business Logic 개발에 집중할 수 있도록 도움
+ JEE이 제공하는 다수의 기능을 지원하고 있기 때문에 JEE 대체 프레임워크로 자리매김하고있다.
  + JEE(Java Enterprise Edition)는 자바를 이용한 서버측 개발을 위한 플랫폼 (위키백과)
+ DI(Dependency Injection)이나 AOP(Aspect Oriented Programming) 등의 기능 지원

## Spring Framework 구조

+ Spring Framework 구조는 Spring의 삼각형으로 설명할 수 있다.   
  + Spring의 삼각형은 Spring에서 엔터프라이즈 애플리케이션 개발 시 복잡함을 해결하는 Spring의 핵심 개념을 의미
  + 3개의 꼭지점과 중앙까지 포함하여 4가지 개념이 있다.

1. POJO(Plain Old Java Object)
  + 특정 환경이나 기술에 종속적이지 않은 객체지향 원리에 충실한 자바 객체
  + 테스트에 용이하며 프레임워크에 구속받지 않고 자유롭게 객체지향 설계를 자유롭게 적용 가능
  + 특정 인터페이스를 구현하거나 클래스를 상속하지 않는 일반 자바 객체
  + 일반적인 자바 객체를 호칭하는 개념
2. PSA(Portable Service Abstraction)
  + 환경과 세부 기술의 변경과 관계없이 일관된 방식으로 기술을 활용할 수 있게 해주는 설계 원칙
  + 트랜젝션 추상화, OXM 추상화 등의 기술의 추상화를 통해 Low Level의 기술 부분과 해당 기술을 사용하는 인터페이스로 분리
  + 데이터베이스에 관계없이 동일하게 적용할 수 있는 트랜젝션 처리방식이 PSA의 한 예
3. IoC/DI (Inversion of Control / Dependency Injection, 제어의 반전 / 의존성 주입)
  + 유연하게 확장 가능한 객체를 만들고 객체의 생성과 객체 간의 의존관계는 외부(컨테이너)에서 동적으로 설정
  + IoC
    + Servlet과 EJB가 나타나면서 객체의 생성 및 의존관계 제어권이 대부분이 Servlet 혹은 EJB Container에게 쥐어짐
      + 그 전에는 개발자가 관리하였다고 한다.
    + 스프링에서도 객체의 생성과 생명주기를 관리하는 Spring Container 혹은 IoC Container 가 존재한다.
  + DI
    + 객체가 의존하고 있는(has) 객체를 직접 생성하거나 검색하지 않아도 된다.
    + xml 설정 파일에서 Java bean으로 개발자가 클래스를 지정하거나 자바의 어노테이션을 활용하여 객체의 의존 관계를 설정하면 컨테이너가 의존관계를 설정한다.
4. AOP(Aspect Oriented Programming, 관점지향 프로그래밍)
  + 문제를 바라보는 관점을 기준으로 프로그래밍하는 기법
  + 문제를 해결하는 핵심 사항과 전체에 적용되는 공통관심 사항을 기준으로 나눠 공통 모듈을 여러 코드에 쉽게 적용할 수 있도록 한다.
  + 관심사의 분리를 통해서 소프트웨어의 모듈성 향상하려는 의도
  + 예를 들어 로그인 여부를 확인하는 모듈(공통모듈)을 생성하여 특정 라우터에 접근하기 전에 적용시키는 것

+ 스프링 추가 개념
  + 일관된 트랜젝션 처리 방법
    + JDBC, JTA 등의 트랜젝션 관련 정보를 설정파일을 통해 입력하면 트랜젝션 구현에 상관 없이 동일한 코드를 여러 환경에서 사용 가능
  + 다양한 API 지원
    + JDBC, iBatis, Mybatis, Hibernate, JPA 등 DB 처리를 위해 널리 사용되는 라이브러리와 연동을 지원
    + DB뿐만 아니라 JMS, 메일, 스케쥴링 등의 애플리케이션 개발에 필요한 다양한 API를 지원

## Spring Framework Module

스프링을 구성하는 모듈은 대표적으로 7개로 나눠볼 수 있는데 아래와 같다. (업데이트할 때마다 구성모듈이 조금씩 바뀌는 듯 하다.)

| 모듈명 | 서술 |
| -- | -- |
| Spring Core | Spring Framework의 핵심기능 제공, Core 컨테이너의 주요 컴포넌트는 Bean Factory로 스프링을 컨테이너로 만든다. |
| Spring Context | 스프링을 프레임워크로 만드는 모듈, 국제화된 메시지(?)나 생명주기 이벤트, 유효성 검증 등을 지원하여 빈 팩토리의 개념을 확장한다. |
| Spring AOP | 스프링 프레임워크와 AOP 기능을 통합시키는 모듈 |
| Spring DAO | 다른 데이터베이스 벤더들의 예외 핸들링과 오류메시지를 관리하는 예외계층을 제공 |
| Spring ORM | 스프링이 여러 ORM 프레임워크에 플러그인되어 Object relational 툴(JDO, iBatis)들을 제공한다. |
| Spring Web | 웹 기반 애플리케이션 context를 제공한다. |
| Spring Web MVC | 스프링 자체적으로 MVC 프레임워크 제공을 하며 쉽게 MVC 기반의 웹 어플리케이션 개발이 가능하도록 한다. |

몇 개는 무슨 말인지를 모르겠다;

## Container

+ 스프링은 자바 객체를 담고 있는 컨테이너
  + 언제든지 스프링 컨테이너로부터 필요한 자바 객체를 불러와 사용 가능
+ 스프링 컨테이너는 객체의 생성, 사용, 소멸에 해당하는 라이프사이클을 관리
  + 라이프사이클을 기본으로 애플리케이션 사용에 유용한 기능을 제공

+ 기능
  + 라이프사이클 관리
  + 2
  + 3

+ IoC Container
  + 오브젝트의 생성과 관계 설정, 사용, 제거 등의 작업을 애플리케이션 코드 대신 독립된 컨테이너가 담당
  + 컨테이너가 코드 대신 오브젝트에 대한 제어권을 가지고 있어 IoC라고 호칭
  + ...
  + ...

+ Spring DI Container
  + Spring DI Container가 관리하는 객체를 빈(Bean)이라 한다.
  + 빈들의 생명주기(Life-Cycle)를 관리하는 의미로 빈 팩토리(BeanFactory)라고 한다.

## Spring Boot

Spring의 경우 Application을 개발하려면 사전에 많은 작업(라이브러리 추가, dependency 설정 등)이 필요하다.   
이러한 번거로운 작업을 빠르고 쉽게 처리하기 위해 생겼다.

mybatis와 다르게 REST api를 구현하기 위해 만드는지 뷰나 설정파일 등을 담는 src 파일이 텅텅 비어있다. 

서버에서는 단순히 요청에 대한 응답만을 보낼 뿐, 로그인과 같은 상태를 저장하는 일은 전혀 하지 않기 때문에 로그인과 같은 기능은 없고 대신해서 요청의 헤더부분에 쿠키나 키, 토큰을 포함해 전송하여 사용자를 구별한다.

장점
+ project에 따라 자주 사용되는 라이브러리들이 미리 조합되어있어 선택만 하면된다.
+ 복잡한 설정을 자동으로 처리
+ 내장 서버를 포함해 톰캣 등의 WAS를 추가로 설치하지 않아도 개발 가능
+ WAS에 배포하지 않고 실행할 수 있는 JAR파일로 웹 애플리케이션 개발 가능

[Spring Boot](https://spring.io/projects/spring-boot)




