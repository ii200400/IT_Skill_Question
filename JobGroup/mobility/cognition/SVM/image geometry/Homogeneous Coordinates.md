# 동차좌표 (Homogeneous Coordinates)

`목차`

* [개요](#개요)
* [동차좌표 (Homogeneous Coordinates) 이해](#동차좌표-homogeneous-coordinates-이해)
* [사영 기하학 (projective geometry)](#사영-기하학-projective-geometry)

## 개요

위키백과에서는 아래와 같이 정의하였다.

> 사영기하학에서 동차좌표는 n차원 사영 공간을 n+1개의 좌표로 나타내는 좌표계다.   
-위키백과-

정확힌 의미는 모르겠으나, 유추하기로는 2D 좌표계(2차원 사영공간 - 영상좌표계)를 3D 좌표계(3차원 좌표 - 월드좌표계)로 나타낼 때 3D 좌표계로 표현할 수 있는 수많은 좌표들을 모두 묶어 `동차좌표` 라고 하는 것 같다.

- 이 때 사용하는 2D 좌표계는 3D 좌표계에서 투영시켜 만든 것이므로 (projective)투영좌표 라고도 하는 것 같다.
- 표현할 수 있는 좌표가 많다는 이유는 이전에도 작성했다 싶이 3D에서 2D로 변환되는 과정에서 깊이 정보가 사라지기 때문

- 참고 블로그
  - [[영상 Geometry #2] Homogeneous Coordinates](https://darkpgmr.tistory.com/78)
  - [Homogeneous Coordinates를 왜 쓸까?](https://coding-groot.tistory.com/89)
  - [동차좌표계란?](https://jw910911.tistory.com/7)

## 동차좌표 (Homogeneous Coordinates) 이해

그림을 예시로 드니 이해가 쉽다!   
3차원의 물체를 2차원의 평면에 투영시키면 아래와 같이 된다.

<img src="https://user-images.githubusercontent.com/19484971/196881412-a264fbd0-290b-44cc-bcfd-50ec2a374142.png" width=400>

3차원의 물체를 치워버리고 2차원 평면의 데이터만으로 3차원 물체의 위치를 유추하고 싶다면 아래와 같이 많은 후보군이 나온다. 이 후보군들을 동차좌표라고 하는 것.

- 참고로 카메라 초점과 투영된 점을 연결하면 위와 같이 하나의 긴 선이 나오는데 투영선(projection ray)이라고 부른다.
    - 투영선 상에 있는 모든 점들은 모두 동일한 한 점으로 투영되는 것을 볼 수 있다.
    - 이미지 평면상의 한 점에 대한 homogeneous 좌표라는 것은 이 점으로 투영되는 (ray 상의) 모든 점들을 한꺼번에 표현하는 방법이라고 생각한다.
    - 이러한 특성으로 3D 좌표계에 존재하는 점을 2D 좌표계로 투영(projection)할 때, 2D 좌표계에 있는 점을 3D 좌표계로 역투영(inverse projection)할 때 사용된다.

<img src="https://user-images.githubusercontent.com/19484971/196881532-eef592f0-a66d-4fcb-9149-a3d247c76ed8.png" width=400>

이미지 평면의 물체가 (x, y)라고 한다면 이의 동차좌표는 (x, y, 1), (2x, 2y, 2), (3x, 3y, 3) 등으로 표현할 수 있고 이 중 (x, y, 1)는 2차원 (가상) 평면의 위치와 겹친다. (2차원 평면은 3차원 데이터로 바꿀 때 기본적으로 거리(깊이)를 1로 가정하므로)

> openGL도 함께 공부하고 있는데 (x, y, 0)은 위치가 아니라 방향을 나타낼 때 사용하는 것 같다. 튜토리얼 3장에서 본 것 같은데 다시 확인해보아야겠다.

해당 기술은 원근감을 더 주거나 덜 주기 위한 필터링이나, 평행이동 하는 행렬, 변환을 할 때 사용하는 행렬에도 사용된다고 한다. 

그래서 다음 파트(변환(Transformation) 파트)에서도 등장한다.. ^ㅠ^

## 사영 기하학 (projective geometry)

위키백과에서는 아래와 같이 설명하고 있다.

> 사영기하학(射影幾何學, 영어: projective geometry)은 기하학적 물체가 사영변환 할 때 변하지 않는 특성들을 연구하는 학문이다.   
-위키백과-

구체적으로 무엇이다! 라고 정의하기에는 너무 어려운 개념이거나 말로 표현하기 힘든 것 같고 이해한 정도만 작성하겠다.

- 이름 그대로 투영(projection)을 다루는 기하학이다. 
- homogeneous(projective) 좌표계를 사용한다. 
- 1차원 사영기하학은 2차원 평면에서 선으로의 투영 관계를, 2차원 사영 기하학은 3D 공간에서 평면으로의 투영 관계를 설명하는 기하학이다. 
- 2차원 사영 기하학에서 두 homogeneous 좌표 (x, y, 1), (2x, 2y, 2)는 서로 같다. 
    - 두 점 모두 동일한 한 점 (x, y)로 투영되기 때문
- 사영 기하학에서는 길이(length), 각도(angle), 평행성(parallelism)이 보존되지 않는다. 
    - 이는 길이, 각도, 평행하지 않은 두 3D 공간의 물체를 2D 영상에 투영시켜 보면 길이, 각도, 평행하게 보이기도 하기 때문
- 사영 기하학에서는 평행한 두 선의 교점을 구할 수 있다.
    - 미술 시간에 소실점(vanishing point)이 위에서 말한 교점이다;
    - <img src="https://user-images.githubusercontent.com/19484971/196913523-34c959c5-2712-4e05-b6cc-59e9d9dfc9ef.png" width=400>
- 사영 기하학에서 보존되는 것은 형태와 포함관계이다.   
즉, 직선은 직선으로 투영되고 곡선은 곡선으로 투영된다. 
    - 물론 직선 중에는 한 점으로 투영되는 경우도 있을 수 있다...
    - 위의 현상을 알고있는데 왜 블로그에서는 형태가 보존된다고 쓴지 모르겠다. 곡선도 투영하면 직선이 나올 수 있는데.. 특별한 경우니 제외하는 걸까..?

그래서 이것이 왜 필요한지 보았더니.. 이해가 안된다 아하하하ㅏ하하ㅏ. 첫번째 참고 블로그를 확인하자.

