## 13-2. 마술 상자 함수 2 (function)

강의와 다르게 작동되는 부분이 많아 많이 당황스러웠다. 그리고 겹치거나 이미 알고있는 내용은 대부분 생략했다.

배우는 내용

- 포인터로 받는 인자
- 함수의 원형
- 배열을 인자로 받기

### 함수와 포인터

각 함수는 다른 함수의 변수들를 모른다. 하지만 포인터를 활용하면 다른 함수에서 정의된 변수를 수정할 수 있다.

```
/* 13-2 함수에서 포인터 사용하기 */

#include <stdio.h>

int swap(int* a, int* b) {
	int temp = *a;

	*a = *b;
	*b = temp;

	return 0;
}
int main() {
	int i, j;

	i = 3;
	j = 5;

	printf("SWAP 이전 : i : %d, j : %d \n", i, j);

	swap(&i, &j);

	printf("SWAP 이후 : i : %d, j : %d \n", i, j);

	return 0;
}
```

결과를 확인하면

![image](https://github.com/ii200400/IT_Skill_Question/assets/19484971/15c295be-bb40-4f26-9830-db9691f19114)

알 수 있는 것은 아래와 같다.

- 포인터를 활용하면 다른 함수에서 정의된 변수도 수정할 수 있다.
  - 당연히 변수의 타입과 같은 포인터를 사용해야 한다.
- 인자를 여러 개 전달하려면 `,`를 사용한다.

### 함수의 원형

가장 먼저 호출되는 함수는 `main`함수이다. 하지만 `main` 함수 아래에 함수를 작성한다면 오류가 출력된다. 하지만 `main`함수 상단에 함수의 원형을 제공하면 `main`함수 아래에 다른 함수를 작성해도 괜찮다.

```
/* 13-2 2 함수의 원형 */

#include <stdio.h>

// 이것이 바로 함수의 원형인데.. 주석처리해도 문제없이 돌아간다;
int swap(int* a, int* b);

int main() {
	int i, j;
	i = 3;
	j = 5;
	printf("SWAP 이전 : i : %d, j : %d \n", i, j);
	swap(&i, &j);
	printf("SWAP 이후 : i : %d, j : %d \n", i, j);

	return 0;
}
int swap(int* a, int* b) {
	int temp = *a;

	*a = *b;
	*b = temp;

	return 0;
}
```

정리를 하면 아래와 같다.

- 함수가 호출되기 전에 함수의 원형을 먼저 작성해주어야 오류가 생기지 않는다.
  - 함수의 원형을 통해 컴파일러에게 함수의 존재를 알려 오류가 생기지 않는 것이다.
  - 함수의 원형에는 함수의 정의와는 다르게 마지막에 세미콜론`;`이 들어간다.

### 배열을 인자로 전달하기

변수 한개씩이 아니라 배열 포인터를 사용하면 여러개의 값을 한 번에 수정할 수 있다.

```
/* 13-2 3 인자에 배열 포인터 사용하기 */

#include <stdio.h>

int add_number(int* parr);
int main() {
    int arr[3];
    int i;

    /* 사용자로 부터 3 개의 원소를 입력 받는다. */
    for (i = 0; i < 3; i++) {
        scanf("%d", &arr[i]);
    }

    add_number(arr);

    printf("배열의 각 원소 : %d, %d, %d", arr[0], arr[1], arr[2]);

    return 0;
}
int add_number(int* parr) {
    int i;
    for (i = 0; i < 3; i++) {
        parr[i]++;
    }
    return 0;
}
```

출력은 아래와 같이 나온다.

![image](https://github.com/ii200400/IT_Skill_Question/assets/19484971/d8c5d5e2-7b73-4974-ab81-3daece318d94)

이전에 배운 내용들을 잘 숙지했다면 이해하는데 문제가 없을 것이다.

### 후기

함수의 원형은 학교에서 선언이라고 배웠는데 내용상 같은 의미같다. 이것은 제쳐두고 선언을 안했는데 잘 되는 이유를 모르겠다. 머리가 아프다;;

... 검색을 해보았는데 왜 잘되는지 모르겠다;; 일단 강의와 다른점은 아래와 같다.

- 내가 사용하는 C언어 버전은 C11이다. 강의는 아마 C98일 것이다.
- 버전이 다른지 컴파일러가 다른지 비쥬얼스튜디오가 자동으로 처리해주는 것인지 함수의 선언이 필요한 상황인데, 선언이 없어도 정상적으로 작동이 된다;
- `swap(int* a, int* b)`인 함수를 `swap(&i, j)`라고 불러도 타입캐스팅으로 `j`가 `int*`로 바뀐다는데 내 환경에서는 그렇지 않다.

오랫만에 `외되!`를 외치니 상쾌하다! ^ㅠ^b

- [13-3. 마술 상자 함수 3 (function)](./13-3.md)
