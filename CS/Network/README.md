# 1-5. 네트워크

+ 네트워크 개요 및 용어 정리
+ OSI 7계층
+ TCP와 UDP
+ TCP/IP 4계층
+ 3-way handshaking & 4-way handshaking
+ Http와 Https

</br>

## 네트워크 개요 및 용어 정리

      "몇 개의 독립적인 장치가 적절한 영역내에서 적당히 빠른 속도의 물리적 통신 채널을 통하여 
      서로가 직접 통신할 수 있도록 지원해 주는 데이타 통신 체계"
      -IEEE(Institute of Electrical and Electronics Engineers:국제 전기 전자 공학회)

네트워크는 Net + Work 의 합성어로, 그물망처럼 연결된 통신 이용 형태를 의미한다.   
(많은 컴퓨터를 연결하다보니 연결망이 복잡해져서 그렇지 사실은 아래와 같이 두 컴퓨터만 이어놓아도 네트워크이다.)
      
<img src="../image/1.5%20Intro1.png" width="30%" height="30%">

컴퓨터를 조금 더 효율적으로 활용할 수 있도록 개발되었으며\
현재에 이르러서 대부분의 한국인들은 무선 인터넷망(wifi)이 없이는 살 수 없는 몸이 되고 말았다.

이것으로 우리는 웹을 사용하고 다른 플레이어들과 실시간으로 게임이 가능하고 가족들과 영상통화를 할 수 있게 되었지만\
보안이 크게 취약해지게 되었고 구현 및 활용이 상대적으로 많이 어렵다.

통신을 하기 위해서 데이터 형식이나 규칙을 만들어야할 필요가 있었는데\
이를 배우기 전에 네트워크에서 자주 사용되는 용어들부터 정리하고 시작하겠다.

</br>

## OSI 7계층

초기 정보통신업체 장비들은 다른 회사의 장비들과 호환이 되지않았는데 이러한 문제를 해결하기 위해 국제표준화 기구(ISO)에서 개발한 표준 모델이다.   
통신을 계층으로 나누어 표준화와 모듈화를 하여 상위 계층은 하위 계층을 신경쓰지 않고 개발할 수 있도록 하였다.   
오류를 잘 찾고 처리할 수 있으며 이름에서 유추할 수 있듯이, 7개의 계층으로 나누어진다.

+ 용어
  + Protocol(프로토콜) : '전송 규약' 또는 '전송 규칙'을 의미한다. 

#### 1. 물리 계층

데이터를 전기신호로 바꿔 통신 케이블로 데이터를 전송하는 역할이다.   
물리적 연결기의 전기적 명세를 정하고 네트워크의 두 노드를 물리적으로 연결시켜준다.

통신 단위는 bit이며 대표적인 프로토콜은 이더넷, 장비로는 리피터, 허브가 있다.   
장비로는 통신 케이블, 허브가 존재한다.

+ 특징
  + 데이터를 전기 신호로 바꾼다.
  + 오류 검출을 하지 않는다.

#### 2. 데이터링크 계층

맥주소(MAC address)를 참고하여 직접 연결된 노드간에 데이터를 전달한다.   
물리계층에서 받은 데이터에 관한 에러검출, 재전송, 흐름제어 등을 다룬다.

통신 단위는 프레임, 프로토콜은 HDLC, PPP, Frame-Relay, FDDI, ATM 등이 있다.
브릿지나 스위치가 이 계층에서 동작하며 물리 계층과 데이터 링크 계층을, 서로 다른 종류의 네트워크를 연결해준다.

+ 특징
  + 프레임에 맥 주소부여(MAC - 물리적주소)
  + 에러검출/재전송/흐름제어

+ 용어
  + MAC Address(맥 주소)   
    네트워크 세그먼트의 데이터 링크 계층에서 통신을 위한 네트워크 인터페이스에 할당된 고유 식별자이다.
  + Bridge / Switch(브릿지 / 스위치)   
    데이터링크계층에서 전송거리를 연장시켜주는 장치, 같은 역할을 하지만 스위치가 더 기능이 좋다.

#### 3. 네트워크 계층

IP 주소를 참고하여 일단 데이터를 최적의 경로로 전송하고 보는 역할을 한다.
도중에 데이터가 누락되거나 파괴되어도 확인 하지 않는다.

통신 단위는 패킷, 프로토콜은 IP(Internet Protocol/인터넷 프로토콜), IPX, ICMP, ARP 등이 있다.
라우터가 동작하는 계층이다.

+ 특징
  + 주소 부여 (IP)
  + 경로 설정 (Route)
  + 에러 확인 기능 부재

+ 용어
  + IP address(IP주소) : 각 컴퓨터에 부여된 네트워크 상 주소
  + Packet(패킷) : 데이터의 묶음 단위, 한번에 전송할 데이터의 크기를 나타낸다.
  + Router(라우터) : IP주소를 참고하여 복잡한 경로를 가진 네트워크에서 최적의 경로를 검색하고 다른 망으로 패킷을 보내주는 역할   

#### 4. 전송계층

일단 TCP 기준으로,   
네트워크의 단말기(컴퓨터나 핸드폰 등)가 신뢰성있는 데이터를 주고 받을 수 있도록 해 준다.   
오류검출 및 복구와 흐름제어, 중복검사 등을 수행하여 패킷이 확실히 단말기에 갈 수 있도록 한다.

대표적인 프로토콜은 TCP와 UDP로 통신 단위는 각각 세그먼트(TCP), 데이터 그램(UDP)이다.   
TCP는 위의 네트워크 계층의 프로토콜인 IP를 기반으로 만들어진 배경으로 인해 둘을 TCP/IP로 합쳐서 부르기도 한다.   
이 계층에서 사용하는 장비는 게이트웨이로 데이터 출입의 관문 역할을 한다.

주소는 Port를 사용한다.

*특징에 대해서는 따로 아래의 TCP와 UDP 항목 참고 요망 *

+ 용어
  + Segment(세그먼트) : TCP에서 세션 간에 전달되는 데이터 단위, 동음이의로 네트워크의 일부분을 의미하기도 한다.
  + Gateway(게이트웨이)   
    한 네트워크(segment)에서 다른 네트워크로 이동하기 위하여 거쳐야 하는 지점   
    서로 다른 네트워크 상의 통신 프로토콜을 적절히 변환해주는 역할을 하며
    라우터와 스위치와는 다르게 프로토콜을 하나 이상 사용한다는 차이점이 있다.

#### 5. 세션계층

응용 프로세스가 통신을 관리하기 위한 방법(세션/session)을 제공한다.   
네트워크 통신 시작, 제어 및 운영, 연결 종료를 책임지며 데이터를 분리 및 유지하여 알맞은 Application으로 보내줄 수 있도록 한다.   
OS(Operating System)가 이 계층에 속한다.

+ 특징
  + 세션 생성/유지/중단 

+ 용어
  + Session(세션)
    1. 네트워크 환경에서 사용자 간 또는 컴퓨터 간의 대화를 위한 논리적 연결 (CS)
    2. 프로세스들 사이에서 통신을 하기 위해 메시지 교환을 통해 서로를 인식한 이후부터 통신을 마칠 때까지의 기간 (CS)
    3. 통신을 시작하고 종료하기까지 사용자가 만든 일련의 요청 ex)장바구니 (Web)

#### 6. 표현계층

데이터의 표현 형식(Format)을 정의한다.   
네트워크와 응용프로그램 사이에서 데이터의 형식을 각자가 알아 볼 수 있도록 변환한다.   
즉, 서로 다른 환경의 컴퓨터와 application들이 데이터를 이해할 수 있도록 한다.

data의 압축(compression), 암호화(Encryption), 인코딩 등을 수행하고   
JPEG, MPEG, QUICKTIME(동영상 포맷), MIDI(음악 포맷)등을 정의한다. 

+ 특징
  + 사용자의 명령어를 완성및 결과 표현.
  + 데이터의 압축/암복호화
  + 포맷 형식 정의

#### 7. 응용계층

응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.   
OSI 7계층 중 최상위 계층이며, 사용자가 직접 눈으로 보고 실제로 작업을 하는 계층이다.

사용자와 직접적으로 상호작용 하는 모든 응용 프로그램들이 이곳에 속하며
HTTP, FTP, SMTP 등이 이 계층에 속한 프로토콜이다.

+ 특징
  + 네트워크 소프트웨어 UI 구성
  + 사용자의 입출력(I/O) 데이터 처리

#### 참고

+ 위키백과
+ https://ciscoking.tistory.com/3

</br>

## 전송계층 프로토콜 ( TCP / UDP )

전송계층에서 일반적으로 쓰이는 TCP와 UDP에 대한 특징을 위주로 서술하였다.   
두 프로토콜의 차이점을 중점으로 기억하는 것이 좋다.

#### TCP (Transmission Control Protocol, 전송제어 프로토콜) - 연결형 프로토콜

+ 특징
  + 가상회선을 이용하는 연결 성립 후 통신   
    + 전이중, 점대점 방식의 연결 (일반적인 전화가 이와 같다.)   
    + 3-way handshaking 과정을 통해 연결을 설정하고 4-way handshaking을 통해 해제
  + 신뢰성 있는 데이터 전송(데이터 순서 보장, 오류 검출, 재전송 요청)
    + UDP에 비하여 느린 속도   
    + Streaming 서비스에 불리
  + 일대일 통신 (멀티캐스팅이나 브로드캐스팅을 지원x)
  + 데이터의 경계 구분이 없다
    + 바이트 스트림 서비스를 의미 
    + 데이터의 크기가 무제한

+ 용어
  + 전이중(full-duplex) : 전송이 양방향으로 동시에 일어날 수 있음을 의미
  + 점대점(point to point) : 점대점이란 각 연결이 정확히 2개의 종단점을 가지고 있음을 의미

#### UDP (User Datagram Protocol, 사용자 데이터그램 프로토콜) - 비연결형 프로토콜

+ 특징
  + 연결 없이 통신이 가능한 프로토콜
    + 상대적으로 간단하게 구현 가능
  + 흐름제어, 오류제어 또는 손상된 데이터 수신에 대한 재전송을 **하지 않는다**
    + UDP헤더의 CheckSum 필드를 통해 최소한의 오류만 검출
    + 신뢰성은 낮지만 TCP에 비해 빠른 속도
    + 신뢰성보다 성능이 중요시 되는 실시간 서비스(streaming)에 자주 사용
  + 일대다 통신(멀티캐스팅이나 브로드캐스팅)이나 P2P에 자주 사용
  + 데이터 경계 구분이 있는 데이터그램 단위로 전송
    + 크기는 65535바이트, 초과하면 분할하여 전송

+ 용어
  + P2P(peer-to-peer network)   
    네트워크에 참여하는 기계들의 계산과 대역폭 성능에 의존하여 구성되는 통신망을 의미한다.   
    이 네트워크에서의 기기는 클라이언트와 서버 역할을 동시에 하게 된다.
    
#### TCP vs UDP

<img src="../image/1.5%20TCPvsUDP.png" width="60%" height="60%">

#### 출처

+ https://mangkyu.tistory.com/15

</br>

## TCP/IP 프로토콜 4계층

인터넷의 대부분의 블로그들이 위키와 맞지 않는 관계로 위키백과의 RFC 1122, Internet STD(인터넷 표준)3 기준으로 작성하겠다.

현재의 인터넷에서 데이터를 주고받는데 실질적으로 쓰이는 **통신규약(프로토콜)의 모음**이다.
이름으로도 알 수 있듯이, 기본적으로 TCP와 IP를 사용하는 것을 전제로 한다.

TCP/IP 프로토콜은 OSI 모델보다 먼저 개발되었기 때문에 두 모델은 정확하게 일치하지 않는다.   
두 모델 모두 계층형 이라는 공통점을 가지고 있지만   
TCP/IP는 인터넷 개발 이후 표준화 업데이트가 지속되어 신뢰성이 우수한 반면   
OSI 7 Layer는 표준이 되기는 하지만 실질적으로 구현하는 예가 거의 없어 신뢰성이 저하되어있다고 한다.

#### 1. 링크 계층 (Link Layer)

OSI 7계층의 물리계층과 데이터 링크 계층과 비슷한 역할을 한다. (똑같지 않다.)   
호스트가 라우터를 개입없이 통신하는, 로컬 네트워크 연결의 범위 내에서의 프로토콜과 인터페이스를 정의한다.

프레임을 구성하여 전송 매체(전선 등)로 보냄으로 인터넷 계층의 패킷을 전송할 준비를 한다.

보통은 MAC주소를 사용하지만 명시적으로 정의되어있는 것은 아니다.
관련된 기술로 이더넷, Wi-Fi 등이, 프로토콜로는 PPP, SLIP 등이 있다.

+용어
  + 호스트(host) :  컴퓨터 네트워크에 연결된 컴퓨터나 기타 장치이다.

#### 2. 인터넷 계층 (Internet Layer)

OSI 7계층의 네트워크 계층과 비슷한 역할을 한다.   
IP를 기반으로, 네트워크 호스트를 식별할 수 있도록 각 네트워크의 주소 지정 시스템을 정의한다.

신뢰성보다는 여러 네트워크를 통해 패킷을 이동시키는 것에 중점을 두며   
전송 계층 프로토콜을 신경쓰지 않고 단순히 네트워크에서 다른 네트워크로 데이터를 전송한다.

기본적으로 IP 주소를 사용하고   
프로토콜 또한 IP(IPv4, IPv6)를 사용한다.

+ 용어
  +  Routing(라우팅) : 네트워크에서 또는 여러 네트워크 사이에서 트래픽에 대한 경로를 선택하는 과정이나 기술

#### 3. 전송 계층(Transport Layer)

OSI 7계층의 전송 계층과 비슷한 역할을 한다.  
응용 프로그램이 작업별로 데이터 송수신에 사용하는 기본 데이터 채널을 설정한다.

네트워크를 통해 이동하거나, 이동할 데이터들의 송수신을 담당한다.
인터넷 계층의 데이터 전달 안전성 및 신뢰성 부재로 인하여 일부 프로토콜은 신뢰성있는 데이터 전달을 보장하기도 한다.

포트 번호를 이용하여 전송을 하고
프로토콜은 대표적으로 TCP, UDP를 사용한다. (DCCP, SCTP 등도 있다.)

#### 4. 응용 계층(Application Layer)

IP를 기반으로 네트워크를 사용하는 프로세스 간 데이터를 교환을 위해 설계된 추상 계층이다.   
TCP/IP 모델은 해당 계층을 데이터 형식 및 표시의 세부사항은 라이브러리 및 응용 프로그래밍 인터페이스의 영역으로 지정하여 **정의해두지 않았다.**

TCP/IP의 응용 계층과 다른 계층들과는 서로의 세부사항을 신경쓰지 않고 독립적으로 행동할 수 있도록
응용 계층 프로토콜에 따라 생성된 데이터는 전송 계층 프로토콜 단위에 맞게 캡슐화되어 하위 계층으로 보내진다.

프로토콜은 HTTP, FTP, SMTP, DHCP 등이 있다.

#### 출처

+ https://en.wikipedia.org/wiki/Internet_protocol_suite#Comparison_of_TCP/IP_and_OSI_layering

</br>

## 3-way handshaking & 4-way handshaking
